{% block body %}
	<div class="form-group" class="col-lg-12">
			<input id="tfFiltreProduit" type="text"  class="form-control" placeholder="{{ 'mma.productcatalog.searchproduct'|trans }}">
		</div>
    <table  class="col-lg-12">
    	<thead>
    		<th>{{ 'mma.productcatalog.productimage'|trans  }}</th>
    		<th>{{ 'mma.productcatalog.productname'|trans }}</th>
    		<th>{{ 'mma.productcatalog.productprice'|trans }}</th>
    		<th>{{ 'mma.productcatalog.productcategory'|trans }}</th>
    		<th>{{ 'mma.productcatalog.productquantity'|trans }}</th>
    		<th>{{ 'mma.productcatalog.productavailable'|trans }}</th>
    		<th>{{ 'mma.productcatalog.productstate'|trans }}</th>
    		<th></th>
    		<th><a class="fa fa-plus-circle" href="" style="color:#33cc33;font-size:30px; text-align: center;align-content:center; " data-toggle="modal" data-target="#produitModal"></a></th>
    		
    	</thead>
    	<tbody id="tbProduits">
		    {% for produit in produits %}
        		<tr>
            		<td><img src="/uploads/brochures/{{produit.image}}" style="max-height: 150px; max-width: 150px"></img></td>
            		<td>{{ produit.nom }}</td>
            		<td>{{ produit.prix }} â‚¬</td>
            		<td>{{ produit.categorie   }}</td>
            		<td>{{ produit.quantite }}</td>
            		<td>{% if produit.disponible == '1' %} oui {% else %} Non {% endif %}</td>
            		<td>{{ produit.etat }}</td>
        			<td><a class="fa fa-edit" href="{{ path('configuration_produit_controller_editer',{'id':produit.id}) }}"  style="color:darkorange;"></a></td>
        			<td ><a class="fa fa-trash" style="margin-left: -3px; color:red; align-content:center; text-align: center;"
					data-toggle="modal" data-target="#confirmModal{{produit.id}}"></a></td>
        			
        		</tr>
			{{  include("confirm/confirm.html.twig", {'stepId':produit.id,'todo':'remove_product', 'recetteId':produit.id, 'message':'Voulez vous vraiment suprimer ce produit?'}) }}
    		{% endfor %}
    	</tbody>
    </table>

	<div id="produitModal" id="contact_dialog" class="modal fade" role="dialog">
		<div class="modal-dialog modal-lg">

			<!-- Modal content-->
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h4 class="modal-title">Inserer un produit</h4>
				</div>
				<div class="modal-body">
                    {{ include('configuration/produits/create.html.twig') }}
				</div>
			</div>
		</div>
	</div>
<script>
    $("#tfFiltreProduit").on("keyup", function() {
        var value = $(this).val().toLowerCase();
        $("#tbProduits tr").filter(function() {
			$(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
        });
    });

    function fillOderFields(value, idx, idy){
        	document.getElementById(idx).value = value;
        	document.getElementById(idy).value = value;
    }
    $(document).ready(function(){
        $('[data-toggle="popover"]').popover();  
        $('.js-datepicker').datepicker({
            format: 'yyyy-mm-dd'
        });
    });
    initOffer();
    $('.produit_action_cb').click(function(e){
    	var value = this.checked;
    	var tfs = document.getElementsByClassName('produit_action_tf');
        for(var i = 0; i < tfs.length; i++){
        	var tf = tfs[i];
        	if(!value){
            	tf.value = "";
        	}
        	tf.disabled =  !value;
        }
        var cbs = document.getElementsByClassName('produit_action_cb');
        for(var i = 0; i < cbs.length; i++){
        	var cb = cbs[i];
        	cb.checked = value;
        }
    });
    $('.available').click(function(e){
        var availables = document.getElementsByClassName('available');
        for(var i = 0; i < availables.length; i++){
        	var available = availables[i];
        	available.checked = this.checked;
        }
     });

    function initOffer(){
    	var tfs = document.getElementsByClassName('produit_action_tf');
    	if(!$('.produit_action_cb').checked == true){
    		for(var i = 0; i < tfs.length; i++){
    			var tf = tfs[i];
            	tf.disabled =  true;
    		}
        }
		
     }
</script>

{% endblock %}
